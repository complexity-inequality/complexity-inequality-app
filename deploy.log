ls -a ------------------------------------------------------------------
/home/guigo/Documents/projects_dir/08-complexity-inequality/complexity-inequality-app
.
..
code
complexity-inequality-app.Rproj
conf
data
deploy.log
deploy.sh
dockerfile
.git
.gitignore
R
README.md
README.txt
.Rhistory
.Rproj.user
www
docker ps --------------------------------------------------------------
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
Setting Global variables -----------------------------------------------
Setting Credentials ----------------------------------------------------
docker build -----------------------------------------------------------
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/guigo/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
Sending build context to Docker daemon  6.939GB

Step 1/23 : FROM rocker/shiny:latest
 ---> a700fbae0c61
Step 2/23 : LABEL mantainer=guilhermeviegas1993@gmail.com
 ---> Using cache
 ---> 1ef6f0add3e8
Step 3/23 : RUN apt-get update && apt-get install -y   sudo   pandoc   pandoc-citeproc   libcurl4-gnutls-dev   libcairo2-dev   libxt-dev   libssl-dev   libssh2-1-dev   xorg-dev   libxml2-dev   libmpfr-dev   libsasl2-dev   libudunits2-dev   libgdal-dev
 ---> Using cache
 ---> 83a9dcab6c4b
Step 4/23 : RUN apt-get update &&   apt-get upgrade -y &&   apt-get clean
 ---> Using cache
 ---> f27c3d7e09ab
Step 5/23 : RUN R -e "install.packages(c('shiny', 'rmarkdown'), repos='https://cloud.r-project.org/')" # main libs
 ---> Using cache
 ---> a83d694a0c02
Step 6/23 : RUN R -e "install.packages(c('XML', 'devtools', 'bit64', 'xtable'))" # dev libs
 ---> Using cache
 ---> 9fae89afe20b
Step 7/23 : RUN R -e "install.packages(c('readr', 'rio'))" # load libs
 ---> Using cache
 ---> 8ca5dab6c228
Step 8/23 : RUN R -e "install.packages(c('dplyr', 'plyr', 'janitor'))" # Treatment libs
 ---> Using cache
 ---> 4cb8cb79e00f
Step 9/23 : RUN R -e "install.packages(c('ggplot2'))" # viz libs
 ---> Using cache
 ---> cb535aa267a7
Step 10/23 : RUN R -e "install.packages(c('shinydashboard'))"
 ---> Using cache
 ---> 4b8cd15b530d
Step 11/23 : RUN R -e "install.packages(c('config'))"
 ---> Using cache
 ---> 9cc15e6b8b43
Step 12/23 : RUN R -e "install.packages(c('shinyWidgets'))"
 ---> Using cache
 ---> b806cc1a8807
Step 13/23 : RUN R -e "install.packages(c('sf'))"
 ---> Using cache
 ---> 9ac693b106e6
Step 14/23 : RUN R -e "install.packages(c('ggiraph'))"
 ---> Using cache
 ---> ff48aef14983
Step 15/23 : RUN R -e "install.packages(c('mongolite'))"
 ---> Using cache
 ---> 3c0b25aa1360
Step 16/23 : RUN R -e "install.packages(c('shinycssloaders'))"
 ---> Using cache
 ---> ce5ed7b14878
Step 17/23 : RUN R -e "install.packages(c('DT'))"
 ---> Using cache
 ---> 0c0e7425f1f4
Step 18/23 : COPY ./R ./R
 ---> aa5224effef8
Step 19/23 : COPY ./conf ./conf
 ---> f3d1d49c94b2
Step 20/23 : COPY ./data/options ./data/options
 ---> 302838857970
Step 21/23 : COPY ./data/shp ./data/shp
 ---> 8f2708e8713d
Step 22/23 : EXPOSE 3838
 ---> Running in 822f8da6e2be
Removing intermediate container 822f8da6e2be
 ---> 789a43218dfe
Step 23/23 : CMD ["R", "-e", "shiny::runApp('./R', host = '0.0.0.0', port = 3838)"]
 ---> Running in e247340473e0
Removing intermediate container e247340473e0
 ---> c9a4a7b78621
Successfully built c9a4a7b78621
Successfully tagged ci-app-img:latest
docker stop & rm previous container ------------------------------------
ci-app-ctn
ci-app-ctn
docker run ci-app-ctn -----------------------------------------------
c9743a6ee186286c9c78fd5c201a9a50aae78ecdba81085b2f81540f6a85bde2
docker push to dockerhub and gcp ---------------------------------------
Using default tag: latest
The push refers to repository [docker.io/guigo13/ci-app-img]
bdefe7bf06ab: Preparing
0454c452592d: Preparing
0a2f79e9850c: Preparing
a685d88b35df: Preparing
7df3b3aa6fed: Preparing
8337de40ca23: Preparing
bd92accdc25e: Preparing
fdce96f2cc41: Preparing
f02da1f8519b: Preparing
92b09c54c79f: Preparing
fd28ee1ce953: Preparing
7e0b30789739: Preparing
425aebf6c241: Preparing
ecea86d4c82a: Preparing
1bbe8218364f: Preparing
23d5f658cc11: Preparing
33c222e99694: Preparing
fa4dac5af501: Preparing
f2993114a5e0: Preparing
a4778e90bcc9: Preparing
8e5e03028587: Preparing
9fbdaeca625e: Preparing
346be19f13b0: Preparing
935f303ebf75: Preparing
0e64bafdc7ee: Preparing
bd92accdc25e: Waiting
fdce96f2cc41: Waiting
f02da1f8519b: Waiting
92b09c54c79f: Waiting
fd28ee1ce953: Waiting
8337de40ca23: Waiting
425aebf6c241: Waiting
ecea86d4c82a: Waiting
1bbe8218364f: Waiting
23d5f658cc11: Waiting
33c222e99694: Waiting
fa4dac5af501: Waiting
9fbdaeca625e: Waiting
a4778e90bcc9: Waiting
346be19f13b0: Waiting
8e5e03028587: Waiting
935f303ebf75: Waiting
7e0b30789739: Waiting
f2993114a5e0: Waiting
0e64bafdc7ee: Waiting
7df3b3aa6fed: Layer already exists
8337de40ca23: Layer already exists
bd92accdc25e: Layer already exists
fdce96f2cc41: Layer already exists
0454c452592d: Pushed
a685d88b35df: Pushed
f02da1f8519b: Layer already exists
0a2f79e9850c: Pushed
92b09c54c79f: Layer already exists
425aebf6c241: Layer already exists
fd28ee1ce953: Layer already exists
7e0b30789739: Layer already exists
ecea86d4c82a: Layer already exists
1bbe8218364f: Layer already exists
23d5f658cc11: Layer already exists
fa4dac5af501: Layer already exists
33c222e99694: Layer already exists
f2993114a5e0: Layer already exists
a4778e90bcc9: Layer already exists
8e5e03028587: Layer already exists
9fbdaeca625e: Layer already exists
935f303ebf75: Layer already exists
346be19f13b0: Layer already exists
0e64bafdc7ee: Layer already exists
bdefe7bf06ab: Pushed
latest: digest: sha256:b94309f78e416456e9bfcb55b5a9a7dbe4ac959c4e1585ea75e9cd4338af7aa6 size: 5584
image pushed to dockerhub ----------------------------------------------
Using default tag: latest
The push refers to repository [gcr.io/ci-gcp-proj/ci-app-img]
bdefe7bf06ab: Preparing
0454c452592d: Preparing
0a2f79e9850c: Preparing
a685d88b35df: Preparing
7df3b3aa6fed: Preparing
8337de40ca23: Preparing
bd92accdc25e: Preparing
fdce96f2cc41: Preparing
f02da1f8519b: Preparing
92b09c54c79f: Preparing
fd28ee1ce953: Preparing
7e0b30789739: Preparing
425aebf6c241: Preparing
ecea86d4c82a: Preparing
92b09c54c79f: Waiting
8337de40ca23: Waiting
7e0b30789739: Waiting
fd28ee1ce953: Waiting
425aebf6c241: Waiting
fdce96f2cc41: Waiting
f02da1f8519b: Waiting
1bbe8218364f: Preparing
23d5f658cc11: Preparing
33c222e99694: Preparing
fa4dac5af501: Preparing
ecea86d4c82a: Waiting
1bbe8218364f: Waiting
33c222e99694: Waiting
23d5f658cc11: Waiting
f2993114a5e0: Preparing
a4778e90bcc9: Preparing
8e5e03028587: Preparing
9fbdaeca625e: Preparing
346be19f13b0: Preparing
935f303ebf75: Preparing
8e5e03028587: Waiting
a4778e90bcc9: Waiting
0e64bafdc7ee: Preparing
fa4dac5af501: Waiting
9fbdaeca625e: Waiting
f2993114a5e0: Waiting
346be19f13b0: Waiting
0e64bafdc7ee: Waiting
935f303ebf75: Waiting
7df3b3aa6fed: Layer already exists
8337de40ca23: Layer already exists
bd92accdc25e: Layer already exists
fdce96f2cc41: Layer already exists
0454c452592d: Pushed
f02da1f8519b: Layer already exists
0a2f79e9850c: Pushed
a685d88b35df: Pushed
fd28ee1ce953: Layer already exists
92b09c54c79f: Layer already exists
7e0b30789739: Layer already exists
425aebf6c241: Layer already exists
ecea86d4c82a: Layer already exists
1bbe8218364f: Layer already exists
23d5f658cc11: Layer already exists
33c222e99694: Layer already exists
fa4dac5af501: Layer already exists
f2993114a5e0: Layer already exists
a4778e90bcc9: Layer already exists
8e5e03028587: Layer already exists
9fbdaeca625e: Layer already exists
346be19f13b0: Layer already exists
935f303ebf75: Layer already exists
0e64bafdc7ee: Layer already exists
bdefe7bf06ab: Pushed
latest: digest: sha256:b94309f78e416456e9bfcb55b5a9a7dbe4ac959c4e1585ea75e9cd4338af7aa6 size: 5584
image pushed to gcr ----------------------------------------------------
deploy to gcp ----------------------------------------------------------
Updated property [core/project].
Deploying container to Cloud Run service [[1mci-app-run[m] in project [[1mci-gcp-proj[m] region [[1mus-central1[m]
Deploying...
Creating Revision..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................done
Routing traffic...................................................................done
Done.
Service [[1mci-app-run[m] revision [[1mci-app-run-00012-ras[m] has been deployed and is serving [1m100[m percent of traffic.
Service URL: [1mhttps://ci-app-run-3e64vfsf5q-uc.a.run.app[m
Finished deploy.sh ------------------------------------------------------
