ls -a ------------------------------------------------------------------
/home/guigo/Documents/projects_dir/08-complexity-inequality/complexity-inequality-app
.
..
code
complexity-inequality-app.Rproj
conf
data
dockerfile
.git
.gitignore
R
README.md
README.txt
.Rhistory
.Rproj.user
start.log
start.sh
www
docker ps --------------------------------------------------------------
CONTAINER ID   IMAGE          COMMAND   CREATED       STATUS             PORTS                                       NAMES
67ffba66d602   e0bffb4797a0   "/init"   4 weeks ago   Up About an hour   0.0.0.0:8787->8787/tcp, :::8787->8787/tcp   rstudio_container_sp
Setting Global variables -----------------------------------------------
Setting Credentials ----------------------------------------------------
docker build -----------------------------------------------------------
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/guigo/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
Sending build context to Docker daemon  6.939GB
Step 1/23 : FROM rocker/shiny:latest
 ---> a700fbae0c61
Step 2/23 : LABEL mantainer=guilhermeviegas1993@gmail.com
 ---> Using cache
 ---> 1ef6f0add3e8
Step 3/23 : RUN apt-get update && apt-get install -y   sudo   pandoc   pandoc-citeproc   libcurl4-gnutls-dev   libcairo2-dev   libxt-dev   libssl-dev   libssh2-1-dev   xorg-dev   libxml2-dev   libmpfr-dev   libsasl2-dev   libudunits2-dev   libgdal-dev
 ---> Using cache
 ---> 83a9dcab6c4b
Step 4/23 : RUN apt-get update &&   apt-get upgrade -y &&   apt-get clean
 ---> Using cache
 ---> f27c3d7e09ab
Step 5/23 : RUN R -e "install.packages(c('shiny', 'rmarkdown'), repos='https://cloud.r-project.org/')" # main libs
 ---> Using cache
 ---> a83d694a0c02
Step 6/23 : RUN R -e "install.packages(c('XML', 'devtools', 'bit64', 'xtable'))" # dev libs
 ---> Using cache
 ---> 9fae89afe20b
Step 7/23 : RUN R -e "install.packages(c('readr', 'rio'))" # load libs
 ---> Using cache
 ---> 8ca5dab6c228
Step 8/23 : RUN R -e "install.packages(c('dplyr', 'plyr', 'janitor'))" # Treatment libs
 ---> Using cache
 ---> 4cb8cb79e00f
Step 9/23 : RUN R -e "install.packages(c('ggplot2'))" # viz libs
 ---> Using cache
 ---> cb535aa267a7
Step 10/23 : RUN R -e "install.packages(c('shinydashboard'))"
 ---> Using cache
 ---> 4b8cd15b530d
Step 11/23 : RUN R -e "install.packages(c('config'))"
 ---> Using cache
 ---> 9cc15e6b8b43
Step 12/23 : RUN R -e "install.packages(c('shinyWidgets'))"
 ---> Using cache
 ---> b806cc1a8807
Step 13/23 : RUN R -e "install.packages(c('sf'))"
 ---> Using cache
 ---> 9ac693b106e6
Step 14/23 : RUN R -e "install.packages(c('ggiraph'))"
 ---> Using cache
 ---> ff48aef14983
Step 15/23 : RUN R -e "install.packages(c('mongolite'))"
 ---> Using cache
 ---> 3c0b25aa1360
Step 16/23 : RUN R -e "install.packages(c('shinycssloaders'))"
 ---> Using cache
 ---> ce5ed7b14878
Step 17/23 : RUN R -e "install.packages(c('DT'))"
 ---> Using cache
 ---> 0c0e7425f1f4
Step 18/23 : COPY ./R ./R
 ---> 186e6695e3c1
Step 19/23 : COPY ./conf ./conf
 ---> 599b69eb7980
Step 20/23 : COPY ./data/options ./data/options
 ---> 23256042f5c2
Step 21/23 : COPY ./data/shp ./data/shp
 ---> 637b431ef5b8
Step 22/23 : EXPOSE 3838
 ---> Running in 8188208f8f5c
Removing intermediate container 8188208f8f5c
 ---> aa648f728453
Step 23/23 : CMD ["R", "-e", "shiny::runApp('./R', host = '0.0.0.0', port = 3838)"]
 ---> Running in f06cdd9f89fa
Removing intermediate container f06cdd9f89fa
 ---> 5e8d15d418a5
Successfully built 5e8d15d418a5
Successfully tagged ci-app-img:latest
docker stop & rm previous container ------------------------------------
ci-app-ctn
ci-app-ctn
docker run ci-app-ctn -----------------------------------------------
562bdc3f7eba75bc45bc5ce840510a78542e2cf9f4fbb7eda17a681b449b4427
docker push to dockerhub and gcp ---------------------------------------
Using default tag: latest
The push refers to repository [docker.io/guigo13/ci-app-img]
b0251b442898: Preparing
abfd15879863: Preparing
3c6489848e94: Preparing
add57906d817: Preparing
7df3b3aa6fed: Preparing
8337de40ca23: Preparing
bd92accdc25e: Preparing
fdce96f2cc41: Preparing
f02da1f8519b: Preparing
92b09c54c79f: Preparing
fd28ee1ce953: Preparing
7e0b30789739: Preparing
425aebf6c241: Preparing
ecea86d4c82a: Preparing
1bbe8218364f: Preparing
23d5f658cc11: Preparing
33c222e99694: Preparing
fa4dac5af501: Preparing
f2993114a5e0: Preparing
a4778e90bcc9: Preparing
8e5e03028587: Preparing
9fbdaeca625e: Preparing
346be19f13b0: Preparing
935f303ebf75: Preparing
0e64bafdc7ee: Preparing
8337de40ca23: Waiting
425aebf6c241: Waiting
fdce96f2cc41: Waiting
bd92accdc25e: Waiting
ecea86d4c82a: Waiting
f02da1f8519b: Waiting
9fbdaeca625e: Waiting
fd28ee1ce953: Waiting
a4778e90bcc9: Waiting
1bbe8218364f: Waiting
7e0b30789739: Waiting
346be19f13b0: Waiting
f2993114a5e0: Waiting
935f303ebf75: Waiting
92b09c54c79f: Waiting
7df3b3aa6fed: Layer already exists
8337de40ca23: Layer already exists
bd92accdc25e: Layer already exists
fdce96f2cc41: Layer already exists
add57906d817: Pushed
abfd15879863: Pushed
f02da1f8519b: Layer already exists
3c6489848e94: Pushed
92b09c54c79f: Layer already exists
fd28ee1ce953: Layer already exists
7e0b30789739: Layer already exists
425aebf6c241: Layer already exists
ecea86d4c82a: Layer already exists
1bbe8218364f: Layer already exists
33c222e99694: Layer already exists
23d5f658cc11: Layer already exists
f2993114a5e0: Layer already exists
fa4dac5af501: Layer already exists
a4778e90bcc9: Layer already exists
8e5e03028587: Layer already exists
346be19f13b0: Layer already exists
935f303ebf75: Layer already exists
0e64bafdc7ee: Layer already exists
9fbdaeca625e: Layer already exists
b0251b442898: Pushed
latest: digest: sha256:691b9aca79c3667650e6ba35a2baa99ea5cbc815ec42c8a4b4e2cb9728e1cd9c size: 5583
Using default tag: latest
The push refers to repository [gcr.io/ci-gcp-proj/ci-app-img]
b0251b442898: Preparing
abfd15879863: Preparing
3c6489848e94: Preparing
add57906d817: Preparing
7df3b3aa6fed: Preparing
8337de40ca23: Preparing
bd92accdc25e: Preparing
fdce96f2cc41: Preparing
f02da1f8519b: Preparing
92b09c54c79f: Preparing
fd28ee1ce953: Preparing
7e0b30789739: Preparing
425aebf6c241: Preparing
ecea86d4c82a: Preparing
1bbe8218364f: Preparing
23d5f658cc11: Preparing
33c222e99694: Preparing
8337de40ca23: Waiting
fa4dac5af501: Preparing
f2993114a5e0: Preparing
fd28ee1ce953: Waiting
bd92accdc25e: Waiting
a4778e90bcc9: Preparing
8e5e03028587: Preparing
92b09c54c79f: Waiting
9fbdaeca625e: Preparing
346be19f13b0: Preparing
7e0b30789739: Waiting
935f303ebf75: Preparing
0e64bafdc7ee: Preparing
1bbe8218364f: Waiting
425aebf6c241: Waiting
23d5f658cc11: Waiting
33c222e99694: Waiting
ecea86d4c82a: Waiting
9fbdaeca625e: Waiting
fa4dac5af501: Waiting
f2993114a5e0: Waiting
346be19f13b0: Waiting
a4778e90bcc9: Waiting
935f303ebf75: Waiting
8e5e03028587: Waiting
f02da1f8519b: Waiting
7df3b3aa6fed: Layer already exists
8337de40ca23: Layer already exists
bd92accdc25e: Layer already exists
fdce96f2cc41: Layer already exists
f02da1f8519b: Layer already exists
add57906d817: Pushed
fd28ee1ce953: Layer already exists
92b09c54c79f: Layer already exists
3c6489848e94: Pushed
abfd15879863: Pushed
7e0b30789739: Layer already exists
425aebf6c241: Layer already exists
23d5f658cc11: Layer already exists
ecea86d4c82a: Layer already exists
1bbe8218364f: Layer already exists
33c222e99694: Layer already exists
fa4dac5af501: Layer already exists
9fbdaeca625e: Layer already exists
a4778e90bcc9: Layer already exists
8e5e03028587: Layer already exists
f2993114a5e0: Layer already exists
935f303ebf75: Layer already exists
346be19f13b0: Layer already exists
0e64bafdc7ee: Layer already exists
b0251b442898: Pushed
latest: digest: sha256:691b9aca79c3667650e6ba35a2baa99ea5cbc815ec42c8a4b4e2cb9728e1cd9c size: 5583
deploy to gcp ----------------------------------------------------------
Updated property [core/project].
Deploying container to Cloud Run service [[1mci-app-run[m] in project [[1mci-gcp-proj[m] region [[1mus-central1[m]
Deploying...
Creating Revision............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................done
Routing traffic................................................done
Done.
Service [[1mci-app-run[m] revision [[1mci-app-run-00009-tah[m] has been deployed and is serving [1m100[m percent of traffic.
Service URL: [1mhttps://ci-app-run-3e64vfsf5q-uc.a.run.app[m
Finished start.sh ------------------------------------------------------
